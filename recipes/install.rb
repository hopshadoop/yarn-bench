#
# DO NOT EDIT THIS FILE DIRECTLY - UNLESS YOU KNOW WHAT YOU ARE DOING
#

user node[:yarnbench][:user] do
  action :create
  supports :manage_home => true
  home "/home/#{node[:yarnbench][:user]}"
  shell "/bin/bash"
  not_if "getent passwd #{node[:yarnbench]['user']}"
end

group node[:yarnbench][:group] do
  action :modify
  members ["#{node[:yarnbench][:user]}"]
  append true
end


private_ip = my_private_ip()
public_ip = my_public_ip()



# Pre-Experiment Code
remote_file "/srv/hadoop/lib/native/libhopsndbevent.so" do
      source "http://snurran.sics.se/hops/libhopsndbevent.so"
      owner node[:hadoop][:yarn][:user]
      group node[:hadoop][:group]
      mode "0775"
      action :create_if_missing
end

ark "yarnbench" do
  url "http://snurran.sics.se/hops/load.tar.gz"
  version "0.1"
  path "/srv"
  home_dir "/srv/yarnbench"
  owner node[:hadoop][:yarn][:user]
end

# Configuration Files


